# Task

## 작업을 명확히 정의하기

getUsers 함수를 개선해줘.
->
getUsers 함수의 성능을 개선해줘. 현재 N+1 쿼리 문제가 있어서 사용자가 많을 때 응답 시간이 5초 이상 걸려.
->
getUsers 함수를 다음 조건에 맞게 리팩터링해줘.

1. N+1 쿼리를 JOIN 또는 서브쿼리로 해결
2. 결과를 페이지네이션 처리(한 페이지당 20명)
3. 응답 시간을 1초 이내로 단축
4. 기존 반환 타입(User[])은 유지

- 무엇을 해야하는가?
- 무엇에 대해 작업하는가?
- 작업 수행을 위해 지켜야 할 것은 무엇인가?
- 작업 완료 시 어떤 상태가 되어야 하는가?

## 역할 지정하기

```
너는 10년 경력의 시니어 백엔드 개발자야.
보안과 성능에 특히 민감한 코드 리뷰어로서 이 코드를 검토해줘.
```

사용하면 좋은 페르소나(Persona/Role)

- 시니어 개발자(코드리뷰, 아키텍쳐 설계)
- 주니어 개발자(문서화, 튜토리얼, 기초 개념)
- QA 엔지니어(테스트 작성, 디버깅)
- DevOps 엔지니어(CI/CD 설정, 도커 구성)
- 보안 전문가(보안 감사, 인증 구현)
- 테크니컬 라이터(README, API 문서, 스펙 정의)

## 출력 형식 명시하기

- 설명없이 코드만 출력해줘.
- 마크다운 테이블 형식으로 정리해줘.
- JSON 형식으로 응답해줘.
- 단계별로 번호를 매겨서 설명해줘.
- 장단점을 표로 비교해줘.
- 100단어 이내로 요약해줘.

```
사용자 목록을 가져오는 REST API를 만들어줘.
출력 형식:
1. TypeScript 코드(Next.js API Route형식)
2. 응답 예시(JSON)
3. 에러 케이스와 처리 방법(Table)
4. 사용 예시(curl 커맨드)
```

## 나눠서 지시하기

단순한 버전부터 점진적으로 개선해나가기.

```
완전한 사용자 인증 시스템을 만들어줘. 이메일/비밀번호 로그인, 소셜 로그인(Google, Github, Kakao), 2FA, 비밀번호 재설정, 이메일 인증, 세션 관리, 로그아웃, 계정 탈퇴까지 전부 포함해줘.
```

```
[1단계]
이메일/비밀번호 기반 기본 로그인 기능을 만들어줘.
- 회원가입
- 로그인
- 로그아웃

[2단계]
이메일 인증 기능을 추가해줘.
- 회원가입 시 인증 메일 발송
- 인증 토큰 검증

[3단계]
비밀번호 재설정 기능을 추가해줘.
```
